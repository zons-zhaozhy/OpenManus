---
description:
globs:
alwaysApply: true
---
# OpenManus Requirements Tracking

## Active Requirements

### Core System Requirements
1. MUST automatically collect and organize all user requirements in this file
   - Priority: High
   - Status: Active
   - Added: June 2025
   - Source: User direct request
   - Implementation: Continuous requirement tracking and documentation

### âœ… COMPLETED: System Architecture Optimization (2025-06-30)
1. **ç»Ÿä¸€æ¶æ„é‡æ„** - COMPLETED
   - Priority: Critical
   - Status: Completed
   - Issue: é¿å…å¤šä¸ªç‰ˆæœ¬å¯¼è‡´çš„é€»è¾‘ä¸ä¸€è‡´é—®é¢˜
   - Solution:
     * é‡æ„main.pyä½œä¸ºç»Ÿä¸€å…¥å£ç‚¹
     * æ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼š--mode cli/web/once
     * åˆ é™¤é‡å¤çš„main_interactive.pyå’Œrun_web_api.py
     * ä¿æŒå•ä¸€ä»£ç é€»è¾‘

2. **é«˜ä»¿OpenHandså‰ç«¯ç•Œé¢** - COMPLETED
   - Priority: High
   - Status: Completed
   - Requirements: ç”¨æˆ·è¦æ±‚é«˜ä»¿OpenHandsçš„å‰ç«¯äº¤äº’åŠŸèƒ½
   - Implementation:
     * ç°ä»£åŒ–Reactç•Œé¢ï¼Œä½¿ç”¨Interå­—ä½“
     * ä¾§è¾¹æ å¯¼èˆªï¼ˆéœ€æ±‚åˆ†æã€è®¾ç½®ã€æ–°å¯¹è¯ï¼‰
     * OpenHandsé£æ ¼çš„èŠå¤©ç•Œé¢
     * çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆready/thinking/errorï¼‰
     * è®¾ç½®é¡µé¢ï¼ˆLLMæä¾›å•†ã€æ¨¡å‹ã€APIå¯†é’¥ï¼‰
     * WebSocketå®æ—¶çŠ¶æ€æ›´æ–°
     * å»ºè®®é—®é¢˜å¿«é€Ÿé€‰æ‹©
     * å“åº”å¼è®¾è®¡

3. **å¤šæ¨¡å¼äº¤äº’æ”¯æŒ** - COMPLETED
   - CLIæ¨¡å¼ï¼špython main.py --mode cli
   - Webæ¨¡å¼ï¼špython main.py --mode web
   - å•æ¬¡æ¨¡å¼ï¼špython main.py --mode once "éœ€æ±‚æè¿°"
   - ç»Ÿä¸€ä½¿ç”¨ç›¸åŒçš„Agentå’Œé…ç½®ç³»ç»Ÿ

### System Architecture Requirements
1. âœ… COMPLETED: Fix Manus system prompt to focus on requirements analysis
   - Priority: Critical
   - Status: Completed
   - Added: June 2025
   - Source: User feedback on incorrect behavior
   - Implementation: Modified app/prompt/manus.py to focus on requirements analysis instead of direct implementation

2. âœ… COMPLETED: Implement global prompt configuration system
   - Priority: High
   - Status: Completed
   - Added: June 2025
   - Source: User request for global prompt management
   - Implementation:
     * Added GlobalPromptSettings in app/config.py
     * Support for meta_prompt, language preferences
     * Global instructions configuration
     * Integration with existing LLM configuration

3. âœ… COMPLETED: Create specialized requirements analysis tool
   - Priority: Medium
   - Status: Completed
   - Added: June 2025
   - Implementation:
     * RequirementsAnalyzer tool in app/tool/requirements_analyzer.py
     * Structured requirement collection and analysis
     * Document generation capabilities
     * Integration with Manus agent

### Current Interface Implementation
**ç»Ÿä¸€å…¥å£æ¶æ„ (main.py)**:
```bash
# Web GUIæ¨¡å¼ï¼ˆé»˜è®¤ï¼Œç±»ä¼¼OpenHandsï¼‰
python main.py

# äº¤äº’å¼CLIæ¨¡å¼
python main.py --mode cli

# å•æ¬¡æ‰§è¡Œæ¨¡å¼
python main.py --mode once "å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ"

# Webæ¨¡å¼è‡ªå®šä¹‰ç«¯å£
python main.py --mode web --port 8080 --host 127.0.0.1
```

**ç•Œé¢ç‰¹æ€§**:
- ğŸ¨ é«˜ä»¿OpenHandsçš„ç°ä»£åŒ–UIè®¾è®¡
- ğŸ“± å“åº”å¼å¸ƒå±€ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ”§ è®¾ç½®é¡µé¢ï¼Œæ”¯æŒLLMé…ç½®
- ğŸ“Š å®æ—¶çŠ¶æ€æŒ‡ç¤ºå™¨
- ğŸ’¬ WebSocketå®æ—¶é€šä¿¡
- ğŸš€ å»ºè®®é—®é¢˜å¿«é€Ÿé€‰æ‹©
- ğŸ¯ ä¸“æ³¨éœ€æ±‚åˆ†æè€Œéç›´æ¥ç¼–ç¨‹

## Completed Requirements

### Phase 1 - Requirements Analysis Focus (2025-06-30)
1. **ç³»ç»Ÿè¡Œä¸ºä¿®æ­£** âœ…
   - ä¿®æ”¹Manusç³»ç»Ÿæç¤ºè¯ï¼Œä¸“æ³¨éœ€æ±‚åˆ†æ
   - é¿å…ç›´æ¥ç¼–ç¨‹å®ç°ï¼Œæ”¹ä¸ºéœ€æ±‚æ¾„æ¸…

2. **å…¨å±€æç¤ºè¯ç³»ç»Ÿ** âœ…
   - å®ç°è¯­è¨€åå¥½é…ç½®ï¼ˆè‹±æ–‡æ€è€ƒï¼Œä¸­æ–‡å›å¤ï¼‰
   - æ”¯æŒå…ƒæç¤ºè¯å’Œå…¨å±€æŒ‡ä»¤

3. **ç»Ÿä¸€æ¶æ„è®¾è®¡** âœ…
   - é‡æ„ä¸ºå•ä¸€å…¥å£ç‚¹
   - æ”¯æŒå¤šç§äº¤äº’æ¨¡å¼
   - é¿å…ä»£ç é‡å¤å’Œé€»è¾‘ä¸ä¸€è‡´

4. **é«˜ä»¿OpenHandsç•Œé¢** âœ…
   - å®ç°ç°ä»£åŒ–Reactå‰ç«¯
   - ç±»ä¼¼OpenHandsçš„ç”¨æˆ·ä½“éªŒ
   - å®Œæ•´çš„è®¾ç½®é¡µé¢å’ŒçŠ¶æ€ç®¡ç†

## Deferred Requirements
(Currently none)

## Rejected Requirements
(Currently none)

## Architecture Decision Record

### ADR-001: ç»Ÿä¸€å…¥å£æ¶æ„ (2025-06-30)
**Context**: ç”¨æˆ·æŒ‡å‡ºå¤šä¸ªç‰ˆæœ¬ï¼ˆmain.py, main_interactive.pyç­‰ï¼‰å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ï¼Œç»´æŠ¤å›°éš¾

**Decision**: é‡‡ç”¨å•ä¸€å…¥å£ç‚¹æ¶æ„
- ä¿ç•™main.pyä½œä¸ºå”¯ä¸€å…¥å£
- é€šè¿‡--modeå‚æ•°æ”¯æŒä¸åŒäº¤äº’æ–¹å¼
- åˆ é™¤é‡å¤æ–‡ä»¶ï¼Œä¿æŒä»£ç ä¸€è‡´æ€§

**Consequences**:
âœ… é€»è¾‘ä¸€è‡´æ€§å¾—åˆ°ä¿è¯
âœ… ç»´æŠ¤æˆæœ¬é™ä½
âœ… ç”¨æˆ·ä½“éªŒç»Ÿä¸€

### ADR-002: é«˜ä»¿OpenHandsç•Œé¢ (2025-06-30)
**Context**: ç”¨æˆ·è¦æ±‚é«˜ä»¿OpenHandsçš„å‰ç«¯äº¤äº’åŠŸèƒ½

**Decision**: å®ç°ç°ä»£åŒ–Reactç•Œé¢ï¼Œå‚è€ƒOpenHandsè®¾è®¡
- ä½¿ç”¨React + ç°ä»£CSS
- å®ç°ä¾§è¾¹æ ã€çŠ¶æ€æŒ‡ç¤ºå™¨ã€è®¾ç½®é¡µé¢
- WebSocketå®æ—¶é€šä¿¡
- å“åº”å¼è®¾è®¡

**Consequences**:
âœ… ç”¨æˆ·ç†Ÿæ‚‰çš„ç•Œé¢ä½“éªŒ
âœ… ä¸“ä¸šçš„è§†è§‰è®¾è®¡
âœ… è‰¯å¥½çš„äº¤äº’åé¦ˆ

## Requirement Tracking Guidelines
1. Each requirement MUST have:
   - Clear description
   - Priority level
   - Current status
   - Addition date
   - Source/origin
   - Implementation details

2. Requirements MUST be categorized as:
   - Active
   - Completed
   - Deferred
   - Rejected

3. Regular requirement reviews MUST:
   - Validate current status
   - Update progress
   - Adjust priorities
   - Archive completed items

4. Architecture decisions MUST be documented with:
   - Context and problem statement
   - Decision and rationale
   - Consequences and trade-offs
